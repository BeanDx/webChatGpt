"use strict";function addDarkClassHTML(){try{"dark"===localStorage.getItem("theme")?(document.querySelector("html").classList.add("dark"),document.querySelector(".themetoggle span").textContent="dark_mode"):(document.querySelector("html").classList.remove("dark"),document.querySelector(".themetoggle span").textContent="wb_sunny")}catch(e){}}document.querySelector(".themetoggle").addEventListener("click",e=>{e.preventDefault(),"dark"===localStorage.getItem("theme")?localStorage.removeItem("theme"):localStorage.setItem("theme","dark"),addDarkClassHTML()}),addDarkClassHTML();const sendButton=document.querySelector(".base__send-request"),textArea=document.querySelector(".base__area"),answerDiv=document.querySelector(".answer__answer");sendButton.addEventListener("click",async()=>{sendButton.disabled=!0,sendButton.style.cursor="not-allowed";let e=20,t=setInterval(()=>{sendButton.textContent=`Подождите (${e}s)...`,--e<0&&(clearInterval(t),sendButton.disabled=!1,sendButton.style.cursor="pointer",sendButton.textContent="Отправить")},1e3);try{let n=textArea.value,s=await fetch("https://api.openai.com/v1/engines/text-davinci-003/completions?model=text-davinci-003",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer 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"},body:JSON.stringify({prompt:n,max_tokens:2e3,n:5,top_p:1,frequency_penalty:0,presence_penalty:.6,stop:["You"]})});if(!s.ok)throw Error(`Ошибка HTTP: ${s.status}`);let r=await s.json();console.log(r),answerDiv.innerText=r.choices[0].text}catch(a){console.error(`Ошибка: ${a.message}`)}});